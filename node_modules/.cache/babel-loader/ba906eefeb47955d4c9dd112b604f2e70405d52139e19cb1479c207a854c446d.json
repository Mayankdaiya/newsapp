{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import NewsItems from'./NewsItems';import loading from'../images/loading.png';import PropTypes from'prop-types';import InfiniteScroll from\"react-infinite-scroll-component\";import Theme from'../context/Theme';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const News=props=>{const[news,setNews]=useState([]);const[totalResults,setTotalResults]=useState(0);const[page,setPage]=useState(1);const{theme}=useContext(Theme);const getTitle=title=>{return title.charAt(0).toUpperCase()+title.slice(1);};useEffect(()=>{document.title=\"\".concat(getTitle(props.category),\" - DailyNews\");fetchMoreData();},[]);const fetchMoreData=async()=>{props.setProgress(10);let url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.apiKey,\"&page=\").concat(page+1,\"&pageSize=\").concat(props.pagesize);props.setProgress(30);let data=await fetch(url);let parsedData=await data.json();props.setProgress(60);setTotalResults(parsedData.totalResults);setPage(page+1);setNews(news.concat(parsedData.articles));props.setProgress(100);console.log(news.length);console.log(totalResults);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center\",style:{color:theme===\"light\"?\"black\":\"white\",fontFamily:'serif'},children:[\"DailyNews - Top \",getTitle(props.category),\" Headlines\"]}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:news.length,next:fetchMoreData,hasMore:news.length!==totalResults,loader:/*#__PURE__*/_jsx(\"h4\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:loading,alt:\"loading..\"})}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container my-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:news.map(element=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItems,{title:element.title,description:element.description,imgurl:element.urlToImage,url:element.url,author:element.author,time:element.publishedAt,source:element.source.name})},element.url);})})})})]});};News.defaultProps={country:\"in\",category:\"general\",pagesize:6};News.propTyps={county:PropTypes.string,category:PropTypes.string,pagesize:PropTypes.number,apiKey:PropTypes.string};export default News;","map":{"version":3,"names":["React","useState","useEffect","useContext","NewsItems","loading","PropTypes","InfiniteScroll","Theme","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","News","props","news","setNews","totalResults","setTotalResults","page","setPage","theme","getTitle","title","charAt","toUpperCase","slice","document","concat","category","fetchMoreData","setProgress","url","country","apiKey","pagesize","data","fetch","parsedData","json","articles","console","log","length","children","className","style","color","fontFamily","dataLength","next","hasMore","loader","src","alt","map","element","description","imgurl","urlToImage","author","time","publishedAt","source","name","defaultProps","propTyps","county","string","number"],"sources":["E:/Study/Full Stack Web D/React/newsapp/src/components/News.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport NewsItems from './NewsItems'\r\nimport loading from '../images/loading.png'\r\nimport PropTypes from 'prop-types'\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport Theme from '../context/Theme';\r\n\r\n\r\nconst News = (props) => {\r\n    const [news, setNews] = useState([])\r\n    const [totalResults, setTotalResults] = useState(0)\r\n    const [page, setPage] = useState(1)\r\n    const {theme} = useContext(Theme)\r\n\r\n    const getTitle = (title) => {\r\n        return title.charAt(0).toUpperCase() + title.slice(1);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        document.title = `${getTitle(props.category)} - DailyNews`\r\n        fetchMoreData()\r\n    },[])\r\n\r\n\r\n    const fetchMoreData = async () => {\r\n        props.setProgress(10)\r\n        let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page + 1}&pageSize=${props.pagesize}`\r\n        props.setProgress(30)\r\n        let data = await fetch(url)\r\n        let parsedData = await data.json()\r\n        props.setProgress(60)\r\n        setTotalResults(parsedData.totalResults)\r\n        setPage(page + 1)\r\n        setNews(news.concat(parsedData.articles))\r\n        props.setProgress(100)\r\n        console.log(news.length) \r\n        console.log(totalResults)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='mt-5'></div>\r\n            <hr />\r\n            <h2 className='text-center' style={{color: theme===\"light\"?\"black\":\"white\" ,fontFamily: 'serif'}}>DailyNews - Top {getTitle(props.category)} Headlines</h2>\r\n            <InfiniteScroll\r\n                dataLength={news.length}\r\n                next={fetchMoreData}\r\n                hasMore={news.length !== totalResults}\r\n                loader={<h4 className='text-center'><img src={loading} alt='loading..' /></h4>}\r\n            >\r\n                <div className=\"container my-1\">\r\n                    <div className=\"row\">\r\n                        {news.map((element) => {\r\n                            return <div className=\"col-md-4\" key={element.url}>\r\n                                <NewsItems title={element.title} description={element.description} imgurl={element.urlToImage} url={element.url} author={element.author} time={element.publishedAt} source={element.source.name} />\r\n                            </div>\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </InfiniteScroll>\r\n        </>\r\n    )\r\n\r\n}\r\nNews.defaultProps = {\r\n    country: \"in\",\r\n    category: \"general\",\r\n    pagesize: 6\r\n}\r\nNews.propTyps = {\r\n    county: PropTypes.string,\r\n    category: PropTypes.string,\r\n    pagesize: PropTypes.number,\r\n    apiKey: PropTypes.string\r\n}\r\n\r\nexport default News\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}